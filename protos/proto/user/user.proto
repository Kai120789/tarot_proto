syntax = "proto3";

package user;

option go_package = "github.com/Kai120789/tarot_proto/protos/gen/go/user";

import "google/protobuf/timestamp.proto";

service User {
    rpc CreateUser (CreateUserRequest) returns (CreateUserResponse);
    rpc GetUserData (GetUserDataRequest) returns (GetUserDataResponse);
    rpc GetUserSettings (GetUserSettingsRequest) returns (GetUserSettingsResponse);
    rpc UpdateUserSettings (UpdateUserSettingsRequest) returns (UpdateUserSettingsResponse);
    rpc SetUserBirthday (SetUserBirthdayRequest) returns (SetUserBirthdayResponse);
    rpc GetUserZodiacSign (GetUserZodiacSignRequest) returns (GetUserZodiacSignResponse);
    rpc GetCurrentDeckByUserId(GetCurrentDeckByUserIdRequest) returns (GetCurrentDeckByUserIdResponse);
	rpc GetAllDecksByUserId(GetAllDecksByUserIdRequest) returns (GetAllDecksByUserIdResponse);
	rpc SetUserCurrentDeck(SetUserCurrentDeckRequest) returns (SetUserCurrentDeckResponse);
	rpc UpdateUserAvailableDecks(UpdateUserAvailableDecksRequest) returns (UpdateUserAvailableDecksResponse);
    rpc GetCurrentThemeByUserId(GetCurrentThemeByUserIdRequest) returns (GetCurrentThemeByUserIdResponse);
	rpc GetAllThemesByUserId(GetAllThemesByUserIdRequest) returns (GetAllThemesByUserIdResponse);
	rpc SetUserCurrentTheme(SetUserCurrentThemeRequest) returns (SetUserCurrentThemeResponse);
	rpc UpdateUserAvailableThemes(UpdateUserAvailableThemesRequest) returns (UpdateUserAvailableThemesResponse);
}

message Deck {
  int64 id = 1;
  string deck_name = 2;
  string deck_description = 3;
}

message UserDeck {
  Deck deck = 1;
  bool is_available = 2;
}

message Theme {
  int64 id = 1;
  string theme_name = 2;
  string bg_image = 3;
  string color = 4;
}

message UserTheme {
  Theme theme = 1;
  bool is_available = 2;
}

message CreateUserRequest {
    int64 chat_id = 1;
    string username = 2;
    string first_name = 3;
    string last_name = 4;
    string language_code = 5;
    bool is_premium = 6;
    int64 friend_id = 7;
    string photo_url = 8;
}

message CreateUserResponse {
    int64 id = 1;
    int64 chat_id = 2;
    string username = 3;
    string first_name = 4;
    string last_name = 5;
    string language = 6;
    string avatar = 7;
    bool is_premium = 8;
    optional google.protobuf.Timestamp birthday = 9;
    optional int64 city_id = 10;
    optional int64 friend_id = 11;
    optional google.protobuf.Timestamp registration_date = 12;
    optional google.protobuf.Timestamp last_enter_date = 13;
}

message GetUserDataRequest {
    int64 Id = 1;
}
message GetUserDataResponse {
    int64 Id = 1;
    int64 ChatId = 2;
    string Username = 3;
    string FirstName = 4;
    string LastName = 5;
    string Language = 6;
    string Avatar = 7;
    bool IsPremium = 8;
    optional google.protobuf.Timestamp Birthday = 9;
    optional int64 CityId = 10;
    optional int64 FriendId = 11;
    optional google.protobuf.Timestamp RegistrationDate = 12;
    optional google.protobuf.Timestamp LastEnterDate = 13;
}

message GetUserSettingsRequest {
    int64 Id = 1;
}
message GetUserSettingsResponse {
    bool IsSubscribe = 1;
    bool IsHoroscopeOn = 2;
}

message UpdateUserSettingsRequest {
    int64 Id = 1;
    bool IsSubscribe = 2;
    bool IsHoroscopeOn = 3;
}
message UpdateUserSettingsResponse {
    bool IsSubscribe = 1;
    bool IsHoroscopeOn = 2;
}

message SetUserBirthdayRequest {
    int64 Id = 1;
    int64 Day = 2;
    int64 Month = 3;
    int64 Year = 4;
}
message SetUserBirthdayResponse {}

message GetUserZodiacSignRequest {
    int64 Id = 1;
}
message GetUserZodiacSignResponse {
    int64 Id = 1;
    string SignEn = 2;
    string SignRu = 3;
    string Symbol = 4;
    google.protobuf.Timestamp StartDate = 5;
    google.protobuf.Timestamp EndDate = 6;
    string Element = 7;
}

message GetCurrentDeckByUserIdRequest {
    int64 Id = 1;
}

message GetCurrentDeckByUserIdResponse {
    Deck Deck = 1;
}

message GetAllDecksByUserIdRequest {
    int64 Id = 1;
}

message GetAllDecksByUserIdResponse {
    repeated UserDeck UserDecks = 1;
}

message SetUserCurrentDeckRequest {
    int64 Id = 1;
    int64 DeckId = 2;
}

message SetUserCurrentDeckResponse {
    Deck Deck = 1;
}

message UpdateUserAvailableDecksRequest {
    int64 Id = 1;
    int64 DeckId = 2;
}

message UpdateUserAvailableDecksResponse {
    repeated UserDeck UserDecks = 1;
}

message GetCurrentThemeByUserIdRequest {
    int64 Id = 1;
}

message GetCurrentThemeByUserIdResponse {
    Theme Theme = 1;
}

message GetAllThemesByUserIdRequest {
    int64 Id = 1;
}

message GetAllThemesByUserIdResponse {
    repeated UserTheme UserThemes = 1;
}

message SetUserCurrentThemeRequest {
    int64 Id = 1;
    int64 ThemeId = 2;
}

message SetUserCurrentThemeResponse {
    Theme Theme = 1;
}

message UpdateUserAvailableThemesRequest {
    int64 Id = 1;
    int64 ThemeId = 2;
}

message UpdateUserAvailableThemesResponse {
    repeated UserTheme UserThemes = 1;
}
